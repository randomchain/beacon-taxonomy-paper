% Randomness beacons
\section{Definition of a Randomness Beacon}\label{sec:beacons}

As part of the goal of this paper, we define a trustless randomness beacon and the properties it must exhibit.
This definition needs to be sufficiently general to encompass a variety of implementations.

%We will also provide a brief understanding of the concept of randomness as it is used within the paper.

%\subsection{Randomness and Unpredictability}\label{sub:beacons_randomness}

%At the same time, the emitted value must also be of sufficient length and exhibit \emph{randomness} \stefan{what is the difference between randomness and unpredictable?}.

%Intuitively, the length and the randomness of a value \stefan{a single value always has 0 entropy: only a distribution of values has entropy (and the bigger and more uniform the numbers the more)} can be quantified with \emph{entropy}.

%\subsection{On the Quest for a Randomness Beacon Definition}

% This section.
\mtjnote{Rewrite this.}
In creating a definition of a trustless randomness beacon, we first look at the root of \emph{randomness beacons}.
The root is not trustless, and therefore we discuss the validity of the root, motivate it, and afterwards propose new properties that make a randomness beacon trustless.

% Rabin and the root of beacons
\citet{rabin1983transaction} introduced the term \emph{beacon}\footnote{We use the term \emph{randomness beacon} because today beacons are perhaps more associated with Bluetooth beacons --- however we do not distinguish between our randomness beacon and Rabin's beacon.} in 1983, and describes it as a \emph{trusted} third party that behaves \emph{honestly} and emits random numbers at a set interval, as a way to enable fair contract signing and secret disclosure.
He furthermore describes three properties for his early beacon:

\begin{description}
    \item[Unpredictability] No party should be able to have advance knowledge of the beacon's output.
    \item[Random] The beacon should use some physical method to produce random numbers.
    \item[Availability] The beacon should be publicly available, and could have backups in case of failure or jamming.
\end{description}

This definition can be used for all our previously described use cases with the glaring exception that users need to trust it.
While we agree with the basics of these properties, we find the properties to be vague and poorly motivated.
Therefore, we specify and extend Rabin's description of a beacon, and provide a motivation for why these properties are needed.

\subsection{Discussion of Randomness Beacon Properties}
This section discusses the basic properties for a Randomness Beacon based on Rabin's properties. \mtjnote{Expand this. The paragraph titles are our own properties which we synthesize by analyzing Rabin's properties}

\subsubsection{Unpredictability}
The main idea governing the security of randomness beacon use cases is that the randomness beacon regularly emits a value which is \emph{unpredictable} for all parties.
Rabin's definition of unpredictability is vague, since we do not know what Rabin meant with advance \enquote{knowledge}.
Therefore, we refine unpredictability to mean \enquote{no party should be able to predict the output of the randomness beacon with higher probability than all other parties}.

\subsubsection{Unbiased}
Unpredictability alone is not enough; imagine a randomness beacon which emits a single unpredictable bit, but with a known distribution to all parties.
For example, it could emit 0 with probability $0.4$ and 1 with probability $0.6$.
This is still unpredictable per the definition that no party is able to predict the output with \emph{higher} probability than other parties, but it is not useful for the use cases because it is biased.
It is unclear whether Rabin foresaw this in his definition of unpredictability by including knowledge of the probability distribution in the word \enquote{knowledge}; thus we add our own explicit property, \emph{unbiased}.
Unbiased means that all outputs are equally likely, i.e.\ the output is statistically close to samplings from a uniform distribution.

Our definition of unbiased is close to what we believe Rabin meant with random.
However, we do not agree with his emphasis on using a physical method to produce random numbers.
While the randomness of such physical methods are good, they are inherently difficult to trust by users of the randomness beacon.
The reason behind this, is that randomness generated by a physical method only is observable by the entity controlling it.
While the randomness may be good, other parties cannot know if it is unbiased or manipulated.
An unpredictable and unbiased number is inherently random. Therefore, there is no need to keep Rabin's \emph{random} property.

\subsubsection{Entropy Guarantee}
Rabin is only concerned with emitting integers in a small range, e.g.\ 1--100, because there, for his use cases, is a trade-off between security and time, such that a larger range provides better security but longer transaction times.
However, we do not impose a limit or give suggestions for the range.
This ultimately depends on the use case of the random number;
hence we introduce a property called \emph{Entropy Guarantee}, meaning that it must be possible to guarantee a level of entropy.

Entropy (formally called Shannon entropy) is a measure of information content in a source.
Formally, Shannon Entropy of a source $X$ with alphabet ${a_1, \ldots, a_n}$ and a probability distribution ${p_1, \ldots , p_n}$ where $p_i = p(a_i)$ is defined as~\cite{informationtheory}:
$$
H(X) = -\sum\limits_{i = 1}^n p_{i}\log_{2} p_{i}
$$
As an example, a coin flip has two equally likely outcomes which gives it an entropy of $-(\frac{1}{2}\log_2 \frac{1}{2} + \frac{1}{2}\log_2 \frac{1}{2}) = 1$.

Since we also have the unbiased property (all outcomes are equally likely), we can simplify this equation significantly:
$$
H(X) = -\log_{2}p(x)\text{,~~where }p(x)\text{ is the probability of an outcome.}
$$

As an example related to randomness beacons, a lottery picking one human on Earth requires at least $-\log_2(\frac{1}{7.5~\text{billion}}) \approx 33~\text{bits}$ of entropy to be able to express any possible outcome.

\subsubsection{Availability}
We relax the requirement of availability to being available in a given setting.
Availability encompass any way the beacon sources its input and emits its output.
It is not required to be publicly available at all times.
Backups are omitted in our definition because we believe this is an implementation specific detail.

We believe this is a better definition of properties that a randomness beacon must exhibit.

\subsection{Removing the Need for Trust}
As stated, Rabin's definition requires trust in a third party, with no way to ensure the honesty of that party.
To avoid having to trust blindly in a third party, we invent a new property with inspiration from \citet{bonneau2015bitcoin}.
They describe a beacon as a function applied regularly to some input with a known min-entropy.
The function returns a near-uniformly distributed random value $r$ at each time interval $t$.
Similarly to our properties, they define unpredictable and unbiased, but also reason about the level of entropy to make sure there is enough.

They capture an important element necessary for a \emph{trustless} randomness beacon, namely verifiability --- the ability to verify certain properties of the output.

Their beacon definition is tailored to describe their solution, and as such is not broad enough to allow for alternatives.
Specifically, they require the input to be unknown before time $t$, and they require that any user can compute the output after time $t$ --- two things that are not necessarily required in some solutions.

We present our own definition, which will be used onward in this paper:

A randomness beacon is a service that publishes random data at a known interval.
Formally, let $B: f(I_t) \rightarrow R$, where $B$ is a beacon, $I_t$ is the input at time $t$, $f$ is a suitable function for generating \stefan{but do we really need to generate randomness in any case? dont you want to assume that the randomness is in the input?} randomness, and $R$ \stefan{$R_t$? depends on time no? maybe it can also make sense to define an entire sequence of inputs and sequence of outcomes? $I_1, I_2, I_3$.... => $O_1,O_2,O_3$.. (is O not better than R?) + see Stefans email for further explanation} is the random outcome. %The entropy of $R$ depends on the quality of $I$, and $I$ can consist of observations of some external source or be directly input by users that use the beacon.
For $B$ to be a beacon, it is run at a known, regular interval, $\delta$, such that $t+n\delta$ for any $n \in \mathbb{N}$ are valid output intervals for the beacon.
In \Cref{fig:abstract_beacon} an example of an abstract beacon can be seen.

\mtjnote{TODO: Put the following section somewhere around here.}
High levels of entropy makes it hard to predict the data produced by the source, and can be obtained from data with less entropy by using extractor functions~\cite{pseudorandomness}.
Extractor functions can be understood as functions that take a large input with little entropy spread throughout the input, and concentrates it into a smaller output \stefan{of the same entropy?}.
They extract the entropy, measuring unpredictability, from the larger input and concentrates it into the output. \stefan{give an overview of what extractors can and cannot achieve: what is the state of the art result here?}

%\citet{bonneau2015bitcoin} define an extractor function as $y = \text{Ext}_k(x)$.
%An extractor $\text{Ext}$ is applied on an $n$-bit input $x$ of \enquote{sufficient} entropy.
%The output $y$ is $m$ bits of \enquote{high} entropy, where $m < n$.
%The key $k$ is used to select from a family of extractors.
%They further define \enquote{sufficient} to be that the min-entropy is at least $m$ bits, and \enquote{high} entropy to be that there is only an negligible difference between the output $y$ and an $m$-bit uniform distribution.
%As such, it is able to convert weak random sources into a highly random output, that statistically appears to be uniformly distributed.

\subimport{}{simple_beacon_fig.tex}

This can also be considered the \emph{beacon protocol}, the procedure that guides the beacons operations.
The protocol also dictates how users interact with the beacon, and how it is controlled.
The protocol is enforced algorithmically or by a \emph{beacon operator} that controls the beacon.

\subsection{Summary}

For sake of completeness, we reiterate our generic randomness beacon properties and combine them with the verifiability.
Combined, they describe properties for a trustless randomness beacon:

\begin{description}
    \item[Unpredictable]
        Any user should not be able to predict the output with a larger probability than sampling a uniform distribution. \stefan{make it more formal, using your notation above}
    \item[Unbiased]
        All outputs from the beacon are equally likely --- in other words, the output is statistically close to samplings from a uniform distribution. \stefan{the difference to Unpredictable and Entropy Guarantee is not so clear: are these properties not somewhat redundant? making them more formal can help}
    \item[Entropy Guarantee]
        There must be a guarantees on the level of output entropy.
Use cases then know if there is enough entropy for their use.
    \item[Available]
        All users in a given setting should have access to the randomness beacon.
        This means both their ability to contribute with input, if applicable, and their access to the output.
    \item[Verifiable]
        Users should not need to trust \emph{any} output.
        A beacon needs to be designed such that it can prove its honesty instead of requiring blind trust.
        This proof can for example be accompanying the output with a proof that can be used to verify the correctness of the output, or giving the users to ability to contest the correctness of the output.
        \mtjnote{We call this Validation later?}
\end{description}

Each of these properties may or may not be fulfilled to some degree --- however an ideal trustworthy randomness beacon should have all of them.% As an absolute minimum, a beacon must be unpredictable and have some level of min-entropy.
It must also be available, but does not always need to be this; periodic availability could be sufficient for some use cases.
Verifiability is only required if users do not want to trust the beacon, it could easily function without it.

%This definition is more flexible than the predecessors, as it does not require a randomness beacon to be publicly available, but rather introduces a \emph{setting} since beacons could also see use in non-public settings.
%However, it also poses a more strict definition of correctness, since it must be proved.
%It also generalizes the verifiability to simply concern the honesty of the beacon.

The definition does not specify any properties about interaction, security, or execution of the beacon and its protocol, only that it somehow has to prove its honesty.
These properties rely on the setting and requirements of a given beacon.

This work is concerned with the trust of a randomness beacon, and as such we do not discuss the function $f$ for generating \stefan{but do we need to generate randomness? dont you want to assume that the randomness is in the input?} randomness --- \citet{bonneau2015bitcoin} provide some insight on this.
